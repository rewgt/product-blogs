window.W||(window.W=new Array,W.$modules=[]),W.$modules.push(function(e,t,r){function n(e,t){function r(e){if("true"==e)return!0;if("false"==e)return!1;if("null"==e)return null;if(e){var t=parseFloat(e);return t+""===e?t:e}return""}var n=[],a=[],i="";return t.split("\n").forEach(function(e){if((e=e.trim())&&"//"!=e.slice(0,2))return 0==e.search(C)?(i&&(a.push(i),i=""),n.push(a),void(a=[])):0==e.search(_)?(i&&(a.push(i),i=""),void a.push(e.split("="))):void(i?i+=" "+e:i=e);i&&(a.push(i),i="")}),i&&a.push(i),a.length&&n.push(a),0!=n.length&&(n.forEach(function(t){var n={},a=null,i=!1;t.forEach(function(e,t){if(Array.isArray(e)){var o=e[1].trim();o&&(n[e[0]]=r(o),i=!0)}else{var s=[];e.split(k).forEach(function(e){var t,n=e.split(",");t=n.length>1?n.map(function(e){return r(e)}):r(n[0]),s.push(t)}),s.length&&(a=s)}}),e.push([i?n:null,a])}),!0)}function a(e,t){if(t.labels)return t.labels;var r=e.labels;return r&&"string"==typeof r?(r=r.split(",")).length<=1?null:(t.labels=r,delete e.labels,r):null}function i(e){(e.title||{}).text&&(e.title.display=!0)}function o(e){var t=[],r=e.replace(E,function(e){return t.push(e),""});return r&&0!=r.search($)?e:t.length<=1?t[0]||e:t}function s(e,t,r){function n(e,t){var r=e/t*100,n=r+"",a=n.indexOf(".");return a<=0?" "+n+"%":" "+r.toPrecision(a+1)+"%"}i(e);var a=t.datasets;if(Array.isArray(a)&&0!=a.length){var s=(t.labels||[]).length;if(0!=s){if(r&&e.legend.showPercent)for(u=0;d=a[u];u++)if(Array.isArray(d.data)){var l=0;d.data.forEach(function(e){l+=e}),l&&d.data.forEach(function(e,r){r<s&&(t.labels[r]+=n(e,l))})}for(var d,u=0;d=a[u];u++)d.backgroundColor?d.backgroundColor=o(d.backgroundColor):d.backgroundColor=function(e){for(var t=[],r=0;r<e;r++)t.push("rgba("+w[r%16]+",0.5)");return t}(s)}}}function l(e){function t(e){var r=e.parent,n=r&&r.component;return n?n.props["isScenePage."]?n:t(r):null}function r(){function t(e){n.removeEventListener("slideenter",t),a.state.chart||a.redraw()}function r(){o+=1,setTimeout(function(){if(a.isHooked){if(a.waitRedraw){a.waitRedraw=!1;var t=a.state.data;h.__design__&&(t=Object.assign({},t),b=[],Array.isArray(t.datasets)&&(t.datasets.forEach(function(e){b.push(Object.assign({},e))}),t.datasets=b)),a.state.chart=new window.Chart(p.findDOMNode(a).getContext("2d"),{type:e,data:t,options:a.state.options||{}})}}else o<10&&r()},a.isHooked?100:600)}var n,a=this,i=this.state.chart;if(!i&&this.ownerSlide){if(!this.isHooked)return;if(!(n=this.ownerSlide.getHtmlNode()))return;if("none"==n.style.display)return void n.addEventListener("slideenter",t,!1)}if(i&&(i.destroy(),this.state.chart=void 0),this.state.data){this.waitRedraw=!0;var o=0;r()}}function a(e,t){return function(){return e.state.chart[t].apply(e.state.chart,arguments)}}function i(e,t,r,n,a){t&&setTimeout(function(){e.setChild("-"+r,function(r){var i=[];n&&i.push("+"+n),i.push(t),a&&i.push(a),e.setChild.apply(e,i)})},0)}function o(e,t,r){for(var n=t.split("."),a=n.length,i=a-1,o=e,s=0;s<a;s++){var l=n[s];s<i?o=o.hasOwnProperty(l)?o[l]:s<i&&0==n[s+1].search(/^[0-9]+$/)?o[l]=[]:o[l]={}:0==l.search(/^[0-9]+$/)?o[parseInt(l)]=r:o[l]=r}}return v.loadElement(["Canvas",{key:e,$id__:function(e,s){if(e<=2)if(1==e){this.waitRedraw=!1,this.ownerSlide=this.widget&&t(this.widget),this.renewChart=function(e){var t=this.parentOf();if(t){var r=null,n="",a=this.duals.keyid+"",o=t.$gui.compIdx[a];if(!isNaN(o)&&o>=0)for(r=t.$gui.comps[o];++o<t.$gui.comps.length;){var s=t.$gui.comps[o];if(s){n=v.keyOfElement(s);break}}i(t,r,a,n,e)}},this.redraw=r,this.getChart=function(){return this.state.chart};for(var l,d=0;l=A[d];d++)this[l]=a(this,l);this.defineDual("data",function(e,t){this.redraw()}),this.defineDual("options",function(e,t){this.redraw()}),this.defineDual("html.",function(e,t){var r=this.parentOf(),a=[],i=this.duals.keyid;if(r&&r.props["data-dsn-sizes"]===i&&n(a,e)&&!(a.length<=1)){var s=O[i];if(s){var l={},d=a[0][0];s.defaultCfg.forEach(function(e){o(l,e[0],e[1])}),d&&Object.keys(d).forEach(function(e){o(l,e,d[e])});var u=[],f={datasets:u};if(!s.scanLabels||s.scanLabels(l,f)){for(var c,p=1;c=a[p];p++){var h=c[1];if(Array.isArray(h)){var g={data:h},v=c[0];v&&Object.keys(v).forEach(function(e){o(g,e,v[e])}),u.push(g)}}s.adjustData&&s.adjustData(l,f),this.duals.data=f,this.duals.options=l}}}})}else if(2==e){if(h.__design__){var u=this.parentOf();if(u&&u.props["data-dsn-sizes"]===this.duals.keyid){var f=u.$gui,c=this;f.chartWd=f.cssWidth,f.chartHi=f.cssHeight,u.listen("id__",function(e,t){e<=2||!c.isHooked||f.chartWd===f.cssWidth&&f.chartHi===f.cssHeight||(f.chartWd=f.cssWidth,f.chartHi=f.cssHeight,c.renewChart())})}}this.waitRedraw||this.redraw()}else if(0==e){var p=this.state.chart;this.state.chart=void 0,p&&p.destroy(),this.ownerSlide=null}}}])}function d(e){var t=["P",{key:e,$id__:function(e,t){if(e<=2&&2==e){var r=!this.props.noShow;h.__design__&&!r?this.duals.style={opacity:"0.2"}:this.duals.style={opacity:r?"1":"0"}}}}];return v.loadElement(t)}function u(){var e=m.topmostWidget_,t=e&&e.component;return t&&t.getHtmlNode()||null}function f(e){return"ARTICLE"==e.nodeName&&e.classList.contains("rewgt-scene")}var c=e("react"),p=e("react-dom"),h=e("shadow-widget"),g=h.$main,v=h.$utils,y=(h.$ex,h.$idSetter),m=h.$creator;y[".pinp.blog.version"]=function(){return"1.1.2"};var C=/^---+$/,_=/^[$_a-zA-Z][$_.a-zA-Z0-9]*=/,k=/[^-+,._A-Za-z0-9]+/,A=["clear","stop","resize","reset","toBase64Image","generateLegend","update","getElementAtEvent","getElementsAtEvent","getDatasetAtEvent","getDatasetMeta"],w=["51,153,102","153,102,0","51,102,153","192,0,0","102,102,51","255,204,102","102,153,0","204,0,153","102,0,153","51,102,204","153,51,51","51,204,0","204,102,0","102,102,153","51,153,255","102,51,51"],E=/#[a-fA-F0-9]+|rgb\([^)]+\)|rgba\([^)]+\)|hsl\([^)]+\)|[a-z]+/g,$=/^[ ,]*$/,O={line1:{defaultCfg:[["elements.point.backgroundColor","#fff"],["elements.point.hoverRadius",4]],scanLabels:a,adjustData:function(e,t){i(e);var r=t.datasets;if(Array.isArray(r))for(var n,a=0;n=r[a];a++){var s=w[a%16];n.backgroundColor?n.backgroundColor=o(n.backgroundColor):n.backgroundColor="rgba("+s+",0.16)",n.borderColor?n.borderColor=o(n.borderColor):n.borderColor="rgba("+s+",0.7)",n.pointBorderColor?n.pointBorderColor=o(n.pointBorderColor):n.pointBorderColor="rgba("+s+",0.7)"}}},line2:{defaultCfg:[["elements.point.backgroundColor","#fff"],["elements.point.hoverRadius",4],["scales.xAxes.0.type","linear"]],adjustData:function(e,t){i(e);var r=t.datasets;if(Array.isArray(r))for(var n,a=0;n=r[a];a++){var s=w[a%16];n.backgroundColor?n.backgroundColor=o(n.backgroundColor):n.backgroundColor="rgba("+s+",0.16)",n.borderColor?n.borderColor=o(n.borderColor):n.borderColor="rgba("+s+",0.7)",n.pointBorderColor?n.pointBorderColor=o(n.pointBorderColor):n.pointBorderColor="rgba("+s+",0.7)";var l=[],d=n.data;Array.isArray(d)&&d.forEach(function(e){Array.isArray(e)&&2==e.length&&l.push({x:e[0],y:e[1]})}),n.data=l}}},bar1:{defaultCfg:[["scales.yAxes.0.ticks.beginAtZero",!0]],scanLabels:a,adjustData:function(e,t){i(e);var r,n=t.datasets;if(Array.isArray(n)&&0!=n.length){var a=(t.labels||[]).length;if(0!=a)if(1==n.length&&"line"!==(r=n[0]).type){if(r.backgroundColor)r.backgroundColor=o(r.backgroundColor);else{for(var s=[],l=0;l<a;l++)s.push("rgba("+w[(l+1)%16]+",0.22)");r.backgroundColor=s}if(r.borderColor)r.borderColor=o(r.borderColor);else{for(var s=[],l=0;l<a;l++)s.push("rgba("+w[l%16]+",0.7)");r.borderColor=s}}else for(var d=0;r=n[d];d++){var u=w[d%16];r.backgroundColor?r.backgroundColor=o(r.backgroundColor):r.backgroundColor="rgba("+u+",0.3)",r.borderColor?r.borderColor=o(r.borderColor):r.borderColor="rgba("+u+",0.7)",r.pointBorderColor?r.pointBorderColor=o(r.pointBorderColor):r.pointBorderColor="rgba("+u+",0.7)"}}}},radar1:{defaultCfg:[["elements.point.backgroundColor","#fff"],["elements.point.hoverRadius",5]],scanLabels:a,adjustData:function(e,t){i(e);var r,n=t.datasets;if(Array.isArray(n)&&0!=n.length&&0!=(t.labels||[]).length)for(var a=0;r=n[a];a++){var s=w[a%16];r.backgroundColor?r.backgroundColor=o(r.backgroundColor):r.backgroundColor="rgba("+s+",0.2)",r.borderColor?r.borderColor=o(r.borderColor):r.borderColor="rgba("+s+",0.8)",r.pointBorderColor?r.pointBorderColor=o(r.pointBorderColor):r.pointBorderColor="rgba("+s+",0.8)"}}},polarArea1:{defaultCfg:[],scanLabels:a,adjustData:s},pie1:{defaultCfg:[],scanLabels:a,adjustData:function(e,t){s(e,t,!0)}},doughnut1:{defaultCfg:[],scanLabels:a,adjustData:function(e,t){s(e,t,!0)}},bubble1:{defaultCfg:[],adjustData:function(e,t){i(e);var r=t.datasets;if(Array.isArray(r))for(var n,a=0;n=r[a];a++){var s=w[a%16];n.backgroundColor?n.backgroundColor=o(n.backgroundColor):n.backgroundColor="rgba("+s+",0.5)";var l=[],d=n.data;Array.isArray(d)&&d.forEach(function(e){Array.isArray(e)&&3==e.length&&l.push({x:e[0],y:e[1],r:e[2]})}),n.data=l}}}};y[".pinp.mini_audio"]=function(e,t){function r(e,t){e.duals.style={backgroundImage:"url("+(t?e.props.playImg:e.props.idleImg)+")"}}if(e<=2){if(1==e){var n=this.props.playImg,a=this.props.idleImg;this.stateImgReady=n&&"string"==typeof n&&a&&"string"==typeof a,this.duals.style={backgroundRepeat:"no-repeat",backgroundSize:"100% 100%",overflow:"hidden"},h.__design__||this.setEvent({$onClick:function(e){var t=this.componentOf("player");t&&(t.duals.playing?"function"==typeof t.stepPause&&t.stepPause(""):"function"==typeof t.stepPlay&&t.stepPlay(0))}})}else if(2==e&&this.stateImgReady){if(!h.__design__){var i=this.componentOf("player"),o=!1;if(i&&void 0!==(o=i.duals.playing)){var s=this;i.listen("playing",function(e,t){r(s,e)})}}r(this,o)}}else;},y[".pinp.mini_audio.player"]=function(e,t){e<=2&&1==e&&(this.defineDual("playing",null,!1),h.__design__?this.duals.style={width:"100%",opacity:"0.08"}:(this.setEvent({$onPlay:function(e){this.duals.playing=!0},$onPause:function(e){this.duals.playing=!1}}),this.duals.style={visibility:"hidden"}))};var x=0;y[".pinp.index_item"]=function(e,t){if(e<=2){if(1==e){var r=this.props.name;this.name_=r&&"string"==typeof r?r:"_name"+ ++x,this.defineDual("nodeTag",function(e,t){e&&"string"==typeof e&&(this.state["tagName."]=e.toLowerCase())})}}else{var n=this.state["html."]||"",a=this.props.subType||"a",i=v.loadElement(["A",{key:"a",klass:"pinp-index-"+a,name:this.name_,"html.":n}]);v.setChildren(this,[i])}},y[".pinp.index_list"]=function(e,t){if(e<=2)1==e?(this.defineDual(["data","itemWidth","itemPadding"]),h.__design__||this.setEvent({$onClick:function(e){var t=e.target;if("A"==t.nodeName){var r=t.getAttribute("data-name");if(r)try{var n=document.querySelector('a[name="'+r+'"]');n&&n.scrollIntoView(!0)}catch(e){}else{var a=parseInt(t.getAttribute("data-idx")||0);!isNaN(a)&&a>=0&&v.pageCtrl.gotoPage(a)}}}})):2==e&&setTimeout(function(e){var t=u();if(t){var r=e.props.subType||"a",n=[],a=[];try{a=t.querySelectorAll(".pinp-index-"+r)}catch(e){}for(var i,o=0;i=a[o];o++){var s,l,d="A"==i.nodeName;d&&(s=i.getAttribute("name")||"",l=i.textContent);for(var c=null;i;){var p=i.parentNode;if(p===t){f(i)&&(c=i);break}i=p}if(c){var g,y=v.keyOfNode(c);if(y){if(h.__design__){g=-1;for(var b,m=0;(b=t.children[m])&&(!f(b)||(g+=1,b!==c));m++);}else g=v.pageCtrl.keys?v.pageCtrl.keys.indexOf(y):-1;g>=0&&n.push([g,l])}}else d&&s&&n.push([s,l])}e.duals.data=n}},1200,this);else{var r=this.state.data;if(Array.isArray(r)){var n=[],a=this.state.itemWidth||.9999,i=this.state.itemPadding;i||(i=[0,10,0,10]),r.forEach(function(e,t){var r=e[0],o="number"==typeof r,s={key:"a","html.":e[1],href:"javascript:void(0)"};o?s["data-idx"]=r:s["data-name"]=r+"";var l=[["Div2",{key:"div"+t,width:a,padding:i}],["A",s]];o&&l.push(["Div2",{key:"pg","html.":r+1+"",style:{display:"inline-block",cssFloat:"right"}}]),n.push(l)}),v.setChildren(this,n)}}},y[".pinp.slides.title"]=function(e,t){2==e&&setTimeout(function(e){e.duals["html."]=document.title||""},1200,this)},y[".pinp.slides.index"]=function(e,t){2==e&&setTimeout(function(e){var t=-1,r=u(),n=e.getHtmlNode();if(r&&n){for(var a=null;n;){var i=n.parentNode;if(i===r){f(n)&&(a=n);break}n=i}var o=a&&v.keyOfNode(a);if(o)if(h.__design__)for(var s,l=0;(s=r.children[l])&&(!f(s)||(t+=1,s!==a));l++);else t=v.pageCtrl.keys.indexOf(o)}e.duals["html."]=t+1+""},1200,this)};var D=null;y[".pinp.slides.pages"]=function(e,t){2==e&&setTimeout(function(e){if(null===D)if(h.__design__){var t=u();if(!t)return;D=0;for(var r,n=0;r=t.children[n];n++)f(r)&&(D+=1)}else D=v.pageCtrl.keys.length;e.duals["html."]=D+""},1200,this)};var P=null,N=null,B=null,j=null,I=null,L=null;if(g.$$onLoad.push(function(e){var t;!P&&h.__design__&&(t=h.$templates.rewgt)&&(t=t.DrawPaper)&&!t._tools&&(P=m.containNode_,t._tools=[{name:"editor",icon:"/blogs/output/res/edit_txt.png",title:"edit paper",url:"/blogs/output/edit_paper.html",halfScreen:!0,noMove:!0,clickable:!0,width:.9999,height:.9999,get:function(e){var t=[],r=e.widget,n=r.getPath();return P.dumpTree(t,r,r.parent.getPath()),[n,t[0],!!e.props["data-inline"]]},set:function(e,t,r){function n(e,t){function r(){h.__design__&&P.notifyBackup&&P.notifyBackup(i,1e3)}t.length?(t.push(r),e.setChild.apply(e,t)):r()}var a=t[0],i=t[1],o=t[2];if(a&&e.widget.getPath()==i&&Array.isArray(o)&&o.length-1>=0){var s=o[0];if(Array.isArray(s)&&s.length>=2){var l=s[1];e.duals.offsetX=l.offsetX||0,e.duals.offsetY=l.offsetY||0}var d=v.loadElement(o),u=c.Children.toArray(d.props.children),f=[];e.$gui.comps.forEach(function(e){var t=v.keyOfElement(e);t&&f.push("-"+t)}),f.length?e.setChild(f,function(t){n(e,u)}):n(e,u)}}}]),N||(N=v.loadElement(["H3",{key:"index_item",$id__:".pinp.index_item",nodeTag:"h3",subType:"a"}])),B||(B=v.loadElement(["Panel",{key:"index_list",className:"rewgt-panel col-reverse",$id__:".pinp.index_list",subType:"a"}])),I||(I=v.loadElement([["Div",{key:"doc_info"}],d("title"),d("desc"),d("keyword"),d("thumb")])),L||(L=v.loadElement([["P",{key:"slides"}],["Span",{key:"title",$id__:".pinp.slides.title"}],["Span",{key:"index",$id__:".pinp.slides.index"}],["Span",{key:"pages",$id__:".pinp.slides.pages"}]])),v.setVendorLib("pinp",function(t){window.Chart?(j||(j=v.loadElement([["P",{key:"charts"}],l("line"),l("bar"),l("radar"),l("polarArea"),l("pie"),l("doughnut"),l("bubble")])),t.setChild(N,B,I,L,j,function(t){e()})):t.setChild(N,B,I,L,function(t){e()})})}),!h.__design__){var S=["width","height","left","top"];g.$onLoad.push(function(){function e(o,s,l,f,p){var h=Object.keys(l).sort();if(!h.length)return s;for(var g=[];h.length;){var v=h.pop();if(v&&"."!=v[0]){var y=l[v];if(f.indexOf("/"+y+"/")>=0)r(y);else{var b=v.split(".").pop(),m=!1,C=a(s,v);if(!C||!b||0==b.search(/^[0-9]+$/)&&(m=!0))m&&console.log("error: invalid name ("+sName+")"),t(o+"."+v);else{var _=d.elementOf(y);if(_){var k=u[y];if(k){if(w=e(y,_,k,f+y+"/",{})){var A=c.cloneElement(w,n(w.props,C.props,b));g.unshift([v,A])}}else{var w=c.cloneElement(_,n(_.props,C.props,b));g.unshift([v,w])}}else t(y)}}}}if(!g.length)return s;for(var E=null,$="/",O=[];g.length;){var x,D,P=g.pop(),N=P[0],B=N.lastIndexOf(".");if(B>=0?(x=N.slice(0,B),D=N.slice(B+1)):(x="",D=N),"/"==$&&($=x),x!=$){if(!(j=i(p,o,s,$,O,E)))return null;E=[$,j],$=x,O=[]}O.unshift([D,P[1]])}var j=i(p,o,s,$,O,E);return j?$?(E=[$,j],i(p,o,s,"",[],E)):j:null}function t(e){console.log("warning: can not find element ("+e+")")}function r(e){console.log("warning: recursive link element ("+e+")")}function n(e,t,r){var n={};return t.style&&(n.style=Object.assign({},e.style,t.style)),S.forEach(function(e){t.hasOwnProperty(e)&&(n[e]=t[e])}),r&&(n.key=r),n}function a(e,t){for(var r=t.split(".");r.length;){var n=r.shift();if(!(e=c.Children.toArray(e.props.children).find(function(e){return v.keyOfElement(e)==n})))return null}return e}function i(e,r,n,a,i,s){for(;s;){var l,d=s[0],u=s[1],f="",p=d.lastIndexOf(".");if(p<0?l=d:(l=d.slice(p+1),f=d.slice(0,p)),f==a){i.push([l,u]);break}if(!f)return null;var h=o(e,r,n,f);if(!h)return null;var g=c.Children.toArray(h.props.children);if((p=g.findIndex(function(e){return v.keyOfElement(e)==l}))<0)return t(d),null;g.splice(p,1,u),g.unshift(h,{}),s=[f,c.cloneElement.apply(null,g)]}var y=o(e,r,n,a);if(!y)return null;if(!i.length)return y;var b=c.Children.toArray(y.props.children);return i.forEach(function(e){var r=e[0],n=b.findIndex(function(e){return v.keyOfElement(e)==r});n<0?t(d):b.splice(n,1,e[1])}),b.length?(b.unshift(y,{}),c.cloneElement.apply(null,b)):y}function o(e,r,n,a){if(!a)return n;var i=e[a];if(i)return i;for(var o=a.split("."),s="";o.length;){var l=o.shift();s?s+="."+l:s=l;var d,u=e[s];if(u)n=u;else{if(!Array.isArray(d=n.props.children)||!(u=d.find(function(e){return v.keyOfElement(e)==l})))return t(r+"."+s),null;n=e[s]=u}}return n}var s=v.pageCtrl;if(!(s&&s.keys.length>0)){var l=m.topmostWidget_,d=l&&l.component;if(d){for(var u=null,f=d.$gui.comps||[],p=f.length,h=0;h<p;h++){var g=f[h];if(g&&g.props["isScenePage."]){var y=v.keyOfElement(g),b=y&&l[y];if(b=b&&b.component){if(b.props.noShow){var C=b.elementOf("link_table");if(C)try{u=JSON.parse(C.props["html."]||"{}")}catch(e){console.log("fatal error: parse json of link_table failed")}}break}}}if(u){var _=u.root;if(!Array.isArray(_))return;var k=[];_.forEach(function(r){var n=d.elementOf(r);if(n){var a=u[r];if(a){var i=e(r,n,a,"/"+r+"/",{});i&&k.push(i)}else k.push(n)}else t(r)}),k.length&&d.setChild.apply(d,k)}}}})}});