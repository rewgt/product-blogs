window.W||(window.W=new Array,W.$modules=[]),W.$modules.push(function(t,e,a){function r(t){return t.getBoundingClientRect()}function i(t){var e=document.createElement("a");return e.href=t,""==e.host&&(e.href=e.href),e}function l(t){t.stopPropagation()}function o(t,e){return e?e.querySelector(t):document.querySelector(t)}function n(t,e,a){"string"==typeof t?o(t).addEventListener(e,a,!1):t.addEventListener(e,a,!1)}function s(t){var e=Ot[t];e||(e=t);var a=/^#[0-9A-Fa-f]+/.exec(e);if(a){var r=a[0].slice(1);if(3==r.length)return[parseInt("0x"+r[0]+r[0]),parseInt("0x"+r[1]+r[1]),parseInt("0x"+r[2]+r[2])];if(r.length>=6)return[parseInt("0x"+r.slice(0,2)),parseInt("0x"+r.slice(2,4)),parseInt("0x"+r.slice(4,6))]}else if(a=/^(rgb|rgba)\s*\(([^)]*)\)/.exec(e)){for(var i,l=a[2].split(","),o=0;i=l[o];o++)l[o]=o<3?parseInt(i)||0:parseFloat(i);return l}return null}function f(){document.getElementById("color-dlg").style.display="none",Ct=null,ct.style.display="none",ht.style.display="none"}function d(t){for(var e,a=t?"none":"block",r=t?"block":"none",i=Q.parentNode,l=0;e=i.children[l];l++)e.style.display=e===Q?a:r;vt.style.display=t?"block":"none"}function c(t){if(Nt&&G){var e=G.componentOf(Nt+".txt");e&&(e.duals["html."]=yt.value)}}function h(t,e,a){e=e||0;var r,i,l,o=t[0],n=0;Array.isArray(o)?(n=t.length-1,r=o[0],i=o[1],l=o[2]):(r=o,i=t[1],l=t[2]),"number"!=typeof l&&(l=It[r]||3);var s=new Array(e+1).join("  "),f=s;if(!r){var d=i.html||[],c=a<=1?"<div class='rewgt-static'>":"<span class='rewgt-static'>",u=a<=1?"</div>":"</span>";return 0==d.length?f="":1==d.length?f+=c+d[0]+u+"\n":(f+=c+"\n",d.forEach(function(t){f+=s+"  "+t+"\n"}),f+=s+u+"\n"),f}var p=!1;"RefDiv"==r?(!0,p=i["isPre."],n=0,f+=(p?"<pre $=":"<div $=")+JSON.stringify(i.$||"")):"RefSpan"==r?(!0,n=0,f+="<span $="+JSON.stringify(i.$||"")):3==l?f+="<span $="+r:(!(p=i["isPre."])&&Xt[r]&&(p=!0),p&&(n=0),f+=(p?"<pre $=":"<div $=")+r);var g=i.key,y=i["html."];g&&(f+=" key='"+g+"'");for(var v in i)if("key"!=v&&"html."!=v&&"$"!=v&&"isPre."!=v){var m=i[v];void 0!==m&&("style"==v&&(v="sty__"),f+=" "+v.replace(Tt,"-$1").toLowerCase()+"=","string"!=typeof m||"$"!=v[0]&&m&&"{"==m[0]&&"}"==m.slice(-1)?f+="'{"+JSON.stringify(m).replace(/&/g,"&amp;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"}'":f+=JSON.stringify(m))}if(n){for(var w,b="",k=1;w=t[k];k+=1)b+=h(w,e+1,l);3==l?b.startsWith(s+"  ")?f+=">"+b.slice(s.length+2):f+=">"+b:f+=">\n"+b}else f+=">",y&&(f+=p?y:y.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"));return p?f+="</pre>\n":3==l?f+="</span>\n":y||"\n"!=f.slice(-1)?f+="</div>\n":f+=s+"</div>\n",f}function u(t,e,a,r,i){if(!Array.isArray(r.widget))return!1;var l=h(r.widget,i,1);if(!l)return!1;if(i>0){var o=new Array(i+1).join("  ");l.startsWith(o)&&(l=l.slice(o.length))}if("number"==typeof e){var n=t.value;t.value=n.slice(0,e)+l+n.slice(a),t.selectionEnd=t.selectionStart=e+l.length}else document.selection?(t.focus(),document.selection.createRange().text=l):t.value=t.value+l;return!0}function p(){wt.innerHTML="",wt.style.display="none",kt.style.display="none",bt.style.display="none",St="",d(!1),mt.focus(),setTimeout(function(){Nt="",yt.value=""},0)}function g(t,e){var a=o("div.link",t),r=o("div.clone",t),i=o("div.fork",t),l=o("div.rotate",t),n=o("div.klass",t);"widget"==e?(a.style.display="block",r.style.display="block",i.style.display="block",l.style.display="block",n.style.display="block"):(i.style.display="none",l.style.display="none",n.style.display="none","arrow"==e?(a.style.display="block",r.style.display="none"):"auto-arrow"==e?(a.style.display="none",r.style.display="none"):"iso-arrow"==e&&(a.style.display="block",r.style.display="block"))}function y(t,e,a,r,i,l){for(var o=e.length,n=1,s=1,f=1;f<o;f+=2){var d=e[f-1],c=e[f];d>n&&(n=d),c>s&&(s=c)}var h=i/n,u=l/s;t.rateX=h,t.rateY=u;for(var p="",g=1,f=3;f<o;f+=2)p+='<div class="pointer" _pos="'+g+'" style="left:'+(d=e[f-1]*h+a)+"px; top:"+(c=e[f]*u+r)+'px"></div>',g+=1;return p}function v(t,e,a){var i;if(t&&e&&Array.isArray(i=t.state["svg.cfg"])){var l=t.state.stroke||3,o=((t.state.style.strokeColor||"rgb(119,119,119)").trim(),100),n=s((t.state.style.fillColor||"rgb(119,119,119)").trim());n&&n.length>=4&&(o=Math.floor(100*n[3]));var f=i[0]||0,c=i[1]||[],h=0,u=0,p="",v=c.slice(4);c.length>=1&&(p=c[0]),c.length>=3&&(h=c[2]),c.length>=4&&(u=c[3]);var m=!1;if(f>=0){var w=t.componentOf("txt");w&&(m=!0,yt.value=w.state["html."]||"",Nt=a)}var b="visible";m||(b="hidden",setTimeout(function(){yt.value="",Nt=""},0)),pt.style.visibility=b,gt.style.visibility=b,rt.value=o+"",it.value=l+"";x='<svg width="60" height="14"><line stroke="#ff7f00" stroke-width="1" ';p&&(x+='stroke-dasharray="'+p+'" '),x+='x1="0%" y1="60%" x2="100%" y2="60%"/></svg>',nt.innerHTML=x;var k=t.state["data-from"];if(f<0&&!k){h<1&&(h=1);x='<svg width="18" height="18" viewBox="0 0 100 100"><path stroke="#ff7f00" fill="#ff7f00" stroke-width="10" d="';x+=(A=le[h-1])+'"/></svg>',lt.innerHTML=x,lt.style.visibility="visible"}else lt.style.visibility="hidden";if(u>=1&&u<=6){var A=ie[u-1],x='<svg width="18" height="18" viewBox="0 0 100 100"><path stroke="#ff7f00" fill="#ff7f00" stroke-width="10" d="';x+=A+'"/></svg>',ot.innerHTML=x,ot.style.visibility="visible"}else ot.style.visibility="hidden";b=f<0?"hidden":"visible",st.style.visibility=b,ft.style.visibility=b,dt.style.visibility=b;var M=r(e);if(f<0){var C=Math.floor(2.5*l+.5);C*=U,wt.innerHTML=y(wt,v,M.left+C,M.top-At+C,M.width-C-C,M.height-C-C),wt.style.display="block",wt.classList.remove("no-move")}else wt.style.display="none";if(k&&f<0){kt.style.display="none";var O=!e.getAttribute("data-align");bt.style.display="block",O?g(bt,"auto-arrow"):g(bt,"arrow"),bt.style.left=M.left+"px",bt.style.top=M.top+"px",bt.style.width=M.width+"px",bt.style.height=M.height+"px",O&&wt.classList.add("no-move")}else{var N=t.state.rotate||0;0==N?(kt.style.left=M.left-2+"px",kt.style.top=M.top-2+"px",kt.style.width=M.width+4+"px",kt.style.height=M.height+4+"px",kt.style[B]="",kt.style.display="block"):(kt.style[B]="rotate("+N+"deg)",kt.style.display="none"),bt.style.display="block",f<0?g(bt,"iso-arrow"):e.getAttribute("data-zero")?g(bt,"iso-arrow"):g(bt,"widget"),bt.style.left=M.left+"px",bt.style.top=M.top+"px",bt.style.width=M.width+"px",bt.style.height=M.height+"px"}}d(!!e)}function m(t){var e=null,a=null;G&&t&&(e=G.componentOf(t))&&(a=e.getHtmlNode()),v(e,a,t)}function w(t,e,a){function r(){var e=t.state["data-from"];if(e){var a=G.componentOf(e);if(!a)return;o=a.state["svg.cfg"];if(Array.isArray(o)&&Array.isArray(l=o[1])){n=l[1];if(Array.isArray(n)){var r=null;n.forEach(function(t){var e=t[0],a=t[2];if(e===i&&a&&e!=a){var l=G.componentOf(a);l&&(r=l)}}),r&&(p(),setTimeout(function(){O(a,r)},100))}}}else{D.eachComponent(G,function(e){if(e!==t){var a,r=e.state["svg.cfg"];if(Array.isArray(r)&&Array.isArray(a=r[1])){var l=a[1];if(Array.isArray(l))for(var o,n=0;o=l[n];n++)o[2]===i&&O(e,t)}}});t.state.left,t.state.top;var l,o=t.state["svg.cfg"];if(Array.isArray(o)&&Array.isArray(l=o[1])){var n=l[1];Array.isArray(n)&&n.forEach(function(e){var a=e[2];if(a){var r=G.componentOf(a);r&&O(t,r)}})}}}var i="";t?(t.state.left,t.state.top,i=t.duals.keyid+"",setTimeout(function(){v(t,t.getHtmlNode(),i),a&&setTimeout(r,100)},e)):v(null,null,i)}function b(t){q(!0,!t,!1)}function k(t){for(var e=document.body;t&&t!==e&&"DIV"!=t.nodeName;)t=t.parentNode;if(t&&t.parentNode===ut){var a="rgba(0,0,0,0)";return t.querySelector("svg")||(a=window.getComputedStyle(t).backgroundColor),a}return""}function A(t,e){if(G&&St){var a=k(t);if(a){if(!e){document.querySelector("#group-opacity");rt.value="rgba(0,0,0,0)"==a?"0":"100"}var r={};e?(r.strokeColor=a,Et=a):(r.fillColor=a,Yt=a);var i=G.componentOf(St);i&&(i.duals.style=r)}}}function x(t){for(;t&&"DIV"!=t.nodeName;)t=t.parentNode;t&&t.parentNode===ut&&(t.querySelector("svg")||(document.querySelector("#color-dlg").style.display="block",Ct=t))}function M(t,e,a,r){var i=a-t,l=r-e,o=Math.abs(i),n=Math.abs(l);if(0==o&&0==n)return 0;var s=Math.sqrt(o*o+n*n),f=Math.acos(n/s),d=180/(Math.PI/f);return i>0?l>0?90-d:270+d:l>0?90+d:270-d}function C(t,e,a,r){document.querySelector("div.free-transform");kt.style.left=t-2+"px",kt.style.top=e-2+"px",kt.style.width=a+4+"px",kt.style.height=r+4+"px",bt.style.left=t+"px",bt.style.top=e+"px",bt.style.width=a+"px",bt.style.height=r+"px"}function O(t,e,a){function i(t,e,a){return t>=a.left&&t<a.left+a.width&&e>=a.top&&e<a.top+a.height}var l=t.state["svg.cfg"];if(Array.isArray(l)&&Array.isArray(yt=l[1])){var o=t.getHtmlNode(),n=e.getHtmlNode();if(o&&n){var s=t.duals.keyid+"",f=yt[1];Array.isArray(f)||(yt[1]=f=[]);var d=e.duals.keyid+"",c=r(o),h=r(n),u=!1;(i(c.left,c.top,h)||i(c.left+c.width-1,c.top,h)||i(c.left+c.width-1,c.top+c.height-1,h)||i(c.left,c.top+c.height-1,h))&&(u=!0);for(var p,g="",y="",v=Et,m=Yt,w=Kt,b=Ht,k=Pt,A=0;p=f[A];A++){var x=p[2];if(x&&x===d){var C=p[0],O=G.componentOf(C);if(O){var N=O.state["svg.cfg"];if(Array.isArray(N)){w=O.state.stroke||3,v=O.state.style.strokeColor||"rgb(119,119,119)",m=O.state.style.fillColor||"rgb(119,119,119)";var T=N[1];Array.isArray(T)&&(b=T[0]||"",k=T[3],isNaN(k)&&(k=2))}if(u)3==p.length&&p.push([v,m,w,b,k]);else{var I=p[3];Array.isArray(I)&&(p.splice(3,1),v=I[0],m=I[1],w=I[2],b=I[3],k=I[4])}y="-"+C}void 0===a&&(a=-2==p[1]),g=p[0];break}}if(u)y&&G.setChild(y);else{g||(g="auto"+(xt+=1),f.push([g,a?-2:-1,d]));c.width,c.height;var X=c.left+c.width/2,S=c.top+c.height/2,E=M(X,S,c.left+c.width,c.top+c.height),Y=M(X,S,c.left,c.top+c.height),H=M(X,S,c.left,c.top),K=M(X,S,c.left+c.width,c.top),P=(h.width,h.height,h.left+h.width/2),_=h.top+h.height/2,L=(M(P,_,h.left+h.width,h.top+h.height),M(P,_,h.left,h.top+h.height),M(P,_,h.left,h.top),M(P,_,h.left+h.width,h.top),Math.floor(2.5*w+.5)),$=L;L*=U;var q,z,j,J,W,R,F=0,B=0,Z=-$,Q=-$,tt=t.props["data-zero"],et=e.props["data-zero"];if(tt){q=X,z=S;var at=c.width>=c.height,rt=!1,it=!1,lt=!1;P>=X?et?(W=P,R=_,Math.abs(R-z)<=L&&(rt=!0,lt=!0),W-q<=L&&(rt=!0,it=!0)):q>=h.left?(W=q,R=_<S?h.top+h.height:h.top,rt=!0):at?z>=h.top&&z<h.top+h.height?(W=h.left,R=z,rt=!0):(W=P,R=_<S?h.top+h.height:h.top,W-q<10&&(W=Math.min(h.left+h.width,q+20)),Math.abs(R-z)<=L&&(W=h.left,rt=!0,lt=!0)):z>=h.top&&z<h.top+h.height?(W=h.left,R=z,rt=!0):(W=h.left,R=_,_<S?z-R<10&&(R=Math.max(h.top,z-20)):R-z<10&&(R=Math.min(h.top+h.height,z+20)),Math.abs(W-q)<=L&&(R=_<S?h.top+h.height:h.top,rt=!0,it=!0)):et?(W=P,R=_,Math.abs(R-z)<=L&&(rt=!0,lt=!0),q-W<=L&&(rt=!0,it=!0)):q<h.left+h.width?(W=q,R=_<S?h.top+h.height:h.top,rt=!0):at?z>=h.top&&z<h.top+h.height?(W=h.left+h.width,R=z,rt=!0):(W=P,R=_<S?h.top+h.height:h.top,q-W<10&&(W=Math.max(h.left,q-20)),Math.abs(R-z)<=L&&(W=h.left+h.width,rt=!0,lt=!0)):z>=h.top&&z<h.top+h.height?(W=h.left+h.width,R=z,rt=!0):(W=h.left+h.width,R=_,_<S?z-R<10&&(R=Math.max(h.top,z-20)):R-z<10&&(R=Math.min(h.top+h.height,z+20)),Math.abs(W-q)<=L&&(R=_<S?h.top+h.height:h.top,rt=!0,it=!0)),rt?(j=(q+W)/2,J=(z+R)/2):a?at?(j=q+3*(W-q)/5,J=z+(R-z)/5):(j=q+(W-q)/5,J=z+3*(R-z)/5):at?(j=W,J=z):(j=q,J=R),rt?(it&&(Z=0),lt&&(Q=0),R<z&&!lt&&(B=$),W<q&&!it&&(F=$)):at?(Z=0,R<z&&(B=$)):(Q=0,W<q&&(F=$))}else{var ot=M(X,S,P,_);ot>K&&ot<=360||ot>=0&&ot<=E?_>=c.top&&_<c.top+c.height?(z=_,R=_,j=((q=c.left+c.width)+(W=et?P:h.left))/2,J=_):(Q=0,W=et?P:h.left,R=_,ot>K&&ot<=360?(q=X,z=c.top,!et&&z-R<10&&(R=Math.max(h.top,z-20))):(q=X,z=c.top+c.height,!et&&R-z<10&&(R=Math.min(h.top+h.height,z+20))),a?(j=q+(W-q)/5,J=z+3*(R-z)/5):(j=q,J=R)):ot>E&&ot<=Y?P>=c.left&&P<c.left+c.width?(q=P,W=P,j=P,J=((z=c.top+c.height)+(R=et?_:h.top))/2):(Z=0,W=P,R=et?_:h.top,ot<=90?(q=c.left+c.width,z=S,!et&&W-q<10&&(W=Math.min(h.left+h.width,q+20))):(q=c.left,z=S,!et&&q-W<10&&(W=Math.max(h.left,q-20))),a?(j=q+3*(W-q)/5,J=z+(R-z)/5):(j=W,J=z)):ot>Y&&ot<=H?_>=c.top&&_<c.top+c.height?(z=_,R=_,j=((q=c.left)+(W=et?P:h.left+h.width))/2,J=_,F=$):(Q=0,W=et?P:h.left+h.width,R=_,ot<=180?(q=X,z=c.top+c.height,!et&&R-z<10&&(R=Math.min(h.top+h.height,z+20)),F=$):(q=X,z=c.top,!et&&z-R<10&&(R=Math.max(h.top,z-20)),F=$),a?(j=q+(W-q)/5,J=z+3*(R-z)/5):(j=q,J=R)):P>=c.left&&P<c.left+c.width?(q=P,W=P,j=P,J=((z=c.top)+(R=et?_:h.top+h.height))/2,Z=0,B=$):(Z=0,W=P,R=et?_:h.top+h.height,ot<=270?(q=c.left,z=S,!et&&q-W<10&&(W=Math.max(h.left,q-20)),B=$):(q=c.left+c.width,z=S,!et&&W-q<10&&(W=Math.min(h.left+h.width,q+20)),B=$),a?(j=q+3*(W-q)/5,J=z+(R-z)/5):(j=W,J=z))}q=Math.floor(q+.5),z=Math.floor(z+.5),j=Math.floor(j+.5),J=Math.floor(J+.5),W=Math.floor(W+.5),R=Math.floor(R+.5);var nt=Math.min(q,W),st=Math.min(z,R),ft=nt-L+F,dt=st-L+B-At,ct=L+L+1,ht=Math.max(Math.abs(W-q)+L+L+Z,ct),ut=Math.max(Math.abs(R-z)+L+L+Q,ct),pt=G.state.offsetX||0,gt=G.state.offsetY||0,yt=[b,0,0,k,q-nt,z-st,j-nt,J-st,W-nt,R-st],vt=[a?-2:-1,yt,V],mt=D.loadElement(["rewgt.SvgPanel",{key:g,klass:"nowrap-default-wrap_reverse items_center-end-stretch-default",left:ft-pt,top:dt-gt,width:ht,height:ut,style:{strokeColor:v,fillColor:m,zIndex:"-1"},stroke:w,"svg.cfg":vt,"data-from":s}]);y?G.setChild(y,function(t){G.setChild(mt)}):G.setChild(mt)}}}}function N(t){var e="-"+t.duals.keyid;setTimeout(function(){G.setChild(e)},100)}function T(t,e,a,r,i,l,o){t.duals.left=r,t.duals.top=i,t.reRender(function(){e.forEach(function(e){O(e,t)}),a.forEach(function(e){var a=e[0];3==e.length?(a.duals.left=e[1]+l,a.duals.top=e[2]+o):O(t,a)})})}function I(t,e,a,r,i){var l=Math.floor(2.5*a+.5);l*=U;for(var o=65535,n=65535,s=0,f=0,d=e.length,c=5;c<d;c+=2){var h=e[c-1],u=e[c];h<o&&(o=h),u<n&&(n=u)}for(c=5;c<d;c+=2){var h=e[c-1]-o,u=e[c]-n;e[c-1]=h,e[c]=u,h>s&&(s=h),u>f&&(f=u)}_e-=o,Le-=n;var p=l+l+1;return[Math.floor(t.left+o*r+.5)-(G.state.offsetX||0),Math.floor(t.top+n*i+.5)-At-(G.state.offsetY||0),Math.floor(Math.max(s*r+l+l,p)+.5),Math.floor(Math.max(f*i+l+l,p)+.5)]}function X(t){var e,a,i=t.target,l=r(i),o=l.height/2,n=t.clientX-l.left,s=t.clientY-l.top;l.width-n<18?(e=s>o?"100% -36px":"100% -18px",a="default"):(e="100% 0px",a="auto"),i.style.backgroundPosition=e,i.style.cursor=a}function S(t){t.target.style.backgroundPosition="100% 0px"}function E(t,e,a){var r=t.componentOf(e);if(r){var i,l=s((r.state.style.fillColor||"").trim());l&&l.length>=3&&(i=100==a?"rgb("+l[0]+","+l[1]+","+l[2]+")":"rgba("+l[0]+","+l[1]+","+l[2]+","+(a/100).toPrecision(2)+")",r.duals.style={fillColor:i})}}function Y(t,e,a){var r=t.componentOf(e);r&&(r.duals.stroke=Kt=a||3,w(r,100,!0))}function H(t,e){G&&St&&setTimeout(function(){re=e,ht.style.display="block"},10)}function K(t,e){if(G&&St){var a=G.componentOf(St);if(a){var r=a.componentOf("txt");if(r){var i=0==e?"default-align_center-right":1==e?"align_center-right-default":"right-default-align_center",l=r.state.klass||"",o=R.mergeClass(r.$gui.className||"",l,i);if(o!==l){var n=a.elementOf("txt");if(!n||!n.props["marked."])return;n=j.cloneElement(n,{"html.":r.state["html."]||"",klass:o}),a.setChild("-txt",function(t){a.setChild(n)})}}}}}function P(t,e,a){if(G){var r=Object.assign({},t.props.style,{zIndex:a+""}),i=t.fullClone({style:r});G.setChild("-"+e,function(t){G.setChild(i)})}}function _(t,e,a,r){var i=t.state["svg.cfg"],l={key:a,left:t.state.left+4,top:t.state.top+4,width:t.state.width,height:t.state.height,rotate:t.state.rotate,stroke:t.state.stroke,style:{strokeColor:t.state.style.strokeColor||"#888",fillColor:t.state.style.fillColor||"#eee"}};if(Array.isArray(i)){var o=(i=i.slice(0))[1];Array.isArray(o)&&(i[1]=o=o.slice(0),o.length>=2&&(o[1]=0)),l["svg.cfg"]=i}var n=null,s=t.componentOf("txt");if(s&&1==t.$gui.comps.length){var f=t.$gui.comps[0];f&&f.props["marked."]&&(f=j.cloneElement(f,{"hookTo.":void 0,"html.":s.state["html."]||""}),l["html."]="",n=j.cloneElement(e,l,f))}n||(n=j.cloneElement(e,l)),G.setChild(n,function(t){t&&r()})}function L(t,e){if(!t.types)return!1;var a,r=t.types.length;for(a=0;a<r;a+=1)if(t.types[a]==e)return!0;return!1}function $(t,e){var a=null;window.XMLHttpRequest?a=new XMLHttpRequest:window.ActiveXObject&&(a=new ActiveXObject("Microsoft.XMLHTTP")),a&&(a.onreadystatechange=function(){4==a.readyState&&(200==a.status?e(null,a.responseText):e(new Error("XMLHttpRequest failed")),a=null)},a.open("GET",t,!0),a.send(null))}function q(t,e,a){var r=null,i=!0;!e&&De&&G?(r=function(){if(!R.containNode_)return null;var t=[],e=G.widget;if(R.containNode_.dumpTree(t,e,e.parent.getPath()),Array.isArray(t)&&t.length){var a=t[0];if(!Array.isArray(a))return null;var r=a[0];if("rewgt.DrawPaper"===r)return[a];if(Array.isArray(r)){if(r.length>=2){var i=r[1];i.offsetX=G.state.offsetX,i.offsetY=G.state.offsetY}return a}}return null}(),Array.isArray(r)||(alert("Error: setup paper data failed"),r=null,i=!1)):i=!1;var l="[PROJECT_NAME]"+JSON.stringify({method:"onDialogExit",param:[t,i,Je,[i,We,r]]});window.parent.window.postMessage(l,"*")}function z(t,e,a){function r(){f>120?console.log("fatal error: load shadow-widget failed"):(f+=1,G?l():setTimeout(r,500))}function i(t,e){var a=t.length,r=0;a?t.forEach(function(t){var i=document.createElement("link");"onload"in i?(e&&(i.onload=function(t){(r+=1)>=a&&e()}),i.setAttribute("rel","stylesheet"),i.setAttribute("href",t),document.head.appendChild(i)):(i=document.createElement("img"),e&&(i.onerror=function(t){(r+=1)>=a&&e()}),i.setAttribute("src",t),document.body.appendChild(i))}):e&&e()}function l(){i(a,function(){Je=t,We=n,De=s;var e=D.loadElement(s).props,a=j.Children.toArray(e.children),r=e.offsetX||0,i=e.offsetY||0;Z=e.defId||"pp0",at.innerHTML="("+r+","+i+")",e.klass&&D.mergeClass(G,e.klass);var l=Object.assign({},e.style,{backgroundImage:"url(output/papergrid.png)",backgroundRepeat:"no-repeat",backgroundPosition:r%20+"px "+i%20+"px"});G.duals.style=l,G.duals.height=window.innerHeight-At,G.duals.offsetX=r,G.duals.offsetY=i,G.componentOf("//").listen("innerSize",function(t,e){G.duals.height=t[1]-At}),a.length?(a.push(o),G.setChild.apply(G,a)):G.reRender(o)})}function o(){var t=window.innerWidth-330;t=t>=460?Math.floor(.86*t):Math.min(360,window.innerWidth-330),vt.style.width=t+"px",yt.style.width=t-4+"px",gt.style.left=t-24+"px";var e=G.getHtmlNode();if(e){var a=window.getComputedStyle(e).backgroundColor;if(a&&"transparent"!=a){var r=document.querySelector(".popline-frame");r&&(r.style.backgroundColor=a)}}var i=0,l=/^auto[0-9]+$/;D.eachComponent(G,function(t){var e=t.duals.keyid+"";if(0==e.search(l)){var a=parseInt(e.slice(4));a>i&&(i=a)}}),xt=i+1}var n,s,f=0,d=!0;if(!Array.isArray(e)||e.length<2||!Array.isArray(a))d=!1;else{if(e[2])return alert("Can not modify immutable paper"),void q(!0,!0,!1);It=R.scanWtcFlag(),Xt=It[1],It=It[0],n=e[0],s=e[1],Array.isArray(s)&&s.length||(d=!1)}if(d){var c=a.findIndex(function(t){return"sw_base.css"==t.split("/").pop()});c>=0&&a.splice(c,1),r()}else alert("Fatal error: unknown format"),q(!0,!0,!1)}var j=t("react"),J=(t("react-dom"),t("shadow-widget")),W=J.$main,D=J.$utils,R=J.$creator,F="",B="transform",U=4,V="lib/res/arrows.svg.json",G=null;W.$onLoad.push(function(){if(G=J.W(".body.paper").component,"/"!=(F=document.location.href.split("?")[0]).slice(-1)){var t=F.lastIndexOf("/");t>=0&&(F=F.slice(0,t+1))}var e=D.vendorId||[],a=e[0]||"";"ie"==a?B=e[1]?"transform":"msTransform":"firefox"==a||"opera"==a?B="transform":"chrome"!=a&&"safari"!=a&&"webkit"!=a||(B="WebkitTransform")});var Z="",Q=(o("#tool-bar"),o("#tool-grid")),tt=o("button",Q),et=o("input",Q),at=o("span",Q),rt=o("#tool-opacity > input"),it=o("#tool-frameWd > input"),lt=o("#tool-arrowIdS"),ot=o("#tool-arrowIdE"),nt=o("#tool-lineId"),st=o("#tool-alignleft"),ft=o("#tool-alignmid"),dt=o("#tool-alignright"),ct=o("#linestyle_dropdown"),ht=o("#arrowstyle_dropdown"),ut=o("div.palette-items"),pt=o("#text-area > .popline-frame"),gt=o("#text-area > .popline-expand"),yt=o("#text-area textarea"),vt=pt.parentNode,mt=o("#react-container"),wt=o("div.point-nodes"),bt=o("div.halo"),kt=o("div.free-transform"),At=70,xt=0,Mt=document.querySelectorAll("#edit-btn > button");n(Mt[0],"click",function(t){b(!0)}),n(Mt[1],"click",function(t){b(!1)}),n(Mt=o("div.palette-items"),"click",l),n(Mt,"dblclick",l),n(Mt,"mouseup",function(t){if(!(t.ctrlKey||t.altKey||t.metaKey)){var e=t.target,a=t.shiftKey,r=!1;t.timeStamp-_t<300?(r=!0,Lt=_t=t.timeStamp,x(e)):(setTimeout(function(){if(!r&&Lt!=_t){var i=null;if("none"!=vt.style.display){var l,o=yt.selectionStart;if("number"==typeof o&&o!=(l=yt.selectionEnd)){var n=yt.value;i=[n.slice(0,o),n.slice(o,l),n.slice(l)]}}var s,d;if(i&&(s=i[1])&&(d=k(e))){t.stopPropagation();var h=/^#[0-9A-Fa-f]+$/,u=/^(rgb|rgba)\([ ,0-9]+\)$/;d=d.replace(/ /g,""),0==s.search(h)||0==s.search(u)?yt.value=i[0]+d+i[2]:yt.value=i[0]+'<span style="color:'+d+'">'+s+"</span>"+i[2],c()}else f(),A(e,a)}},300),_t=t.timeStamp)}}),n(tt,"click",function(t){G&&(G.duals.offsetX=0,G.duals.offsetY=0,at.innerHTML="(0,0)")}),n(et,"change",function(t){if(G){var e=t.target.checked,a=G.state.offsetX,r=G.state.offsetY;G.duals.style={backgroundRepeat:e?"repeat":"no-repeat",backgroundPosition:a%20+"px "+r%20+"px"}}}),n(rt,"mousemove",X),n(rt,"mouseout",S),n(rt,"click",function(t){if(G&&St){var e=t.target,a=r(e),i=a.height/2,l=t.clientX-a.left,o=t.clientY-a.top;if(a.width-l<18){var n=parseInt(e.value)||0,s=5*Math.floor(n/5);o>i?(n!=s?n=s:n-=5,n<0&&(n=0)):(n!=s?n=s+5:n+=5,n>100&&(n=100)),e.value=n+"",E(G,St,n)}}}),n(rt,"change",function(t){if(G&&St){var e=t.target,a=parseInt(e.value)||0;(a=Math.max(0,Math.min(100,a)))+""!==e.value&&setTimeout(function(){e.value=a+""},0),E(G,St,a)}}),n(it,"mousemove",X),n(it,"mouseout",S),n(it,"click",function(t){if(G&&St){var e=t.target,a=r(e),i=a.height/2,l=t.clientX-a.left,o=t.clientY-a.top;if(a.width-l<18){var n=parseInt(e.value);o>i?n>=2&&(n-=1):n<360&&(n+=1),e.value=n+"",Y(G,St,n)}}}),n(it,"change",function(t){if(G&&St){var e=t.target,a=parseInt(e.value)||3;(a=Math.max(1,Math.min(360,a)))+""!==e.value&&setTimeout(function(){e.value=a+""},0),Y(G,St,a)}}),n(lt,"click",function(t){H(t,!0)}),n(ot,"click",function(t){H(t,!1)}),n(nt,"click",function(t){G&&St&&setTimeout(function(){ct.style.display="block"},10)}),n(o("img",st),"click",function(t){K(t,0)}),n(o("img",ft),"click",function(t){K(t,1)}),n(o("img",dt),"click",function(t){K(t,2)}),n("#tool-poptop > img","click",function(t){if(G&&St){var e=G.componentOf(St);if(e){var a=parseInt(e.state.style.zIndex||"0"),r=-999;D.eachComponent(G,function(t){if(e!==t){var a=parseInt(t.state.style.zIndex||"0");a>r&&(r=a)}}),a>r||P(e,St,Math.min(999,r+1))}}}),n("#tool-pushbtm > img","click",function(t){if(G&&St){var e=G.componentOf(St);if(e){var a=parseInt(e.state.style.zIndex||"0"),r=999;D.eachComponent(G,function(t){if(e!==t){var a=parseInt(t.state.style.zIndex||"0");a<r&&(r=a)}}),a<r||P(e,St,Math.max(-999,r-1))}}}),n(ct,"click",function(t){if(G&&St){for(var e=t.target;e&&"svg"!=e.nodeName;)e=e.parentNode;if(e){var a,r=G.componentOf(St);if(r&&Array.isArray(a=r.state["svg.cfg"])){var i=(a[1]||[]).slice(0),l=parseInt(e.getAttribute("_style")||"0"),o=oe[l]||"",n='<svg width="60" height="14"><line stroke="#ff7f00" stroke-width="1" ';o&&(n+='stroke-dasharray="'+o+'" '),n+='x1="0%" y1="60%" x2="100%" y2="60%"/></svg>',nt.innerHTML=n,i[0]=o,(a=a.slice(0))[1]=i,a[0]<0&&(Ht=o),r.duals["svg.cfg"]=a}}}}),n(ht,"click",function(t){if(G&&St){for(var e=t.target;e&&"svg"!=e.nodeName;)e=e.parentNode;if(e){var a,r=parseInt(e.getAttribute("_style")||"1"),i=G.componentOf(St);if(i&&Array.isArray(a=i.state["svg.cfg"])){var l=(a[1]||[]).slice(0);0==l.length&&l.push(""),1==l.length&&l.push(0),2==l.length&&l.push(1);var o='<svg width="18" height="18" viewBox="0 0 100 100"><path stroke="#ff7f00" fill="#ff7f00" stroke-width="10" d="';o+=(re?le[r]||le[0]:ie[r]||ie[1])+'"/></svg>';var n,s=3;re?(s=2,n=lt):(n=ot,Pt=r+1),n.innerHTML=o,l[s]=re&&0==r?0:r+1,(a=a.slice(0))[1]=l,i.duals["svg.cfg"]=a}}}}),n(Mt=o("#color-chart"),"click",l),n(Mt,"dblclick",function(t){var e=t.target;if(Ct&&"TD"==e.nodeName){var a=e.getAttribute("bgcolor")||"#FFFFFF";Ct.style.backgroundColor=a}f(),t.stopPropagation()}),n(gt,"click",function(t){if(G){for(var e=t.target,a=document.body,r=null;e&&e!==a;){if(e.classList.contains("popline-expand")){r=e;break}e=e.parentNode}r&&(pt.clientHeight<100?(vt.style.height="270px",pt.style.height="270px",r.style[B]="rotate(90deg)"):(vt.style.height=At+"px",pt.style.height=At+"px",r.style[B]="rotate(270deg)"))}}),n(yt,"change",c),n(yt,"keydown",l),n(yt,"drop",function(t){var e="";if(L(t.dataTransfer,"application/json")){var a=null,r=t.dataTransfer.getData("application/json")||"{}";try{a=JSON.parse(r)}catch(t){console.log(t)}if(a){var l;if("image"==a.dragType&&(l=a.dragUrl)){"/"!=(g=i("./").pathname)[0]&&(g="/"+g),"/"!=(y=i(l).pathname)[0]&&(y="/"+y),y.startsWith(g)&&(y=y.slice(g.length));var o=y.split("/").pop();e="number"==typeof a.clientWidth?'<img alt="'+o+'" style="width:'+a.clientWidth+"px; height:"+a.clientHeight+'px" src="'+y+'">':"!["+o+"]("+y+")"}else if("template"==a.dragType&&(l=a.dragUrl)){var n=this.selectionStart,s=this.selectionEnd,f=0;if("number"==typeof n){var d=this.value.slice(0,n).split("\n").pop();d.trim()||(f=Math.floor(d.length/2))}var h=this,p=a.option;return p?p.name&&u(h,n,s,p,f)&&c():$(l+=".json",function(t,e){if(t)rootNode.instantShow("error: read JSON failed ("+l+")."),console.log(t);else{try{p=JSON.parse(e)}catch(t){console.log("error: parse JSON failed ("+l+").")}p&&p.name&&u(h,n,s,p,f)&&c()}}),t.preventDefault(),void t.stopPropagation()}}}else if(L(t.dataTransfer,"text/uri-list")&&(l=t.dataTransfer.getData("text/uri-list")||"")){var g=i("./").pathname;"/"!=g[0]&&(g="/"+g);var y=i(l).pathname;"/"!=y[0]&&(y="/"+y),y.startsWith(g)&&(y=y.slice(g.length)),e="["+y.split("/").pop()+"]("+y+")"}if(e){if(t.preventDefault(),t.stopPropagation(),"number"==typeof(n=this.selectionStart)){var v=this.value;this.value=v.slice(0,n)+e+v.slice(this.selectionEnd),this.selectionEnd=this.selectionStart=n+e.length}else document.selection?(this.focus(),document.selection.createRange().text=e):this.value=this.value+e;c()}}),n(wt,"mousedown",function(t){if(G&&St){var e=t.target;if(e.classList.contains("pointer")){var a=e.parentNode;if("block"==a.style.display&&!a.classList.contains("no-move")){var r=G.componentOf(St);if(r){var i,l=r.state["svg.cfg"];if(Array.isArray(l)&&Array.isArray(i=l[1])){var o=parseInt(e.getAttribute("_pos")||"1"),n=o+o+5;n<i.length&&(_e=i[n-1],Le=i[n],Ke=r,Pe=e,$e=t.clientX,qe=t.clientY,ze=parseInt(e.style.left),je=parseInt(e.style.top))}}}}}}),n(kt,"mousedown",function(t){if(!(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)&&G&&St){var e=G.componentOf(St);if(e){var a,i=t.target;i.classList.contains("resize")&&(a=e.getHtmlNode())&&(wt.style.display="none",ye=e,ve=i.getAttribute("data-position"),me=t.clientX,we=t.clientY,be=r(a))}}}),n(o(".remove",bt),"click",function(t){if(G&&St){var e=G.componentOf(St);if(e){var a=St;p();var r=[];D.eachComponent(G,function(t){if(t!==e){var i,l=t.state["svg.cfg"];if(Array.isArray(l)&&Array.isArray(i=l[1])){var o=i[1];if(Array.isArray(o))for(var n=o.length-1;n>=0;n--){var s=o[n],f=s[0];s[2]===a?(r.push("-"+f),o.splice(n,1)):f===a&&o.splice(n,1)}}}});var i=e.state["svg.cfg"];if(Array.isArray(i)){var l,o=i[1];if(Array.isArray(o)&&Array.isArray(l=o[1]))for(var n,s=0;n=l[s];s++)r.push("-"+n[0])}r.push("-"+a),G.setChild.apply(G,r)}}}),n(o(".klass",bt),"click",function(t){function e(t,e){for(var a=t.split(/ +/),r=a.length-1;r>=0;){var l=a[r];ne.indexOf(l)>=0&&(e&&(i=l),a.splice(r,1)),r-=1}return a.join(" ")}if(G&&St){var a=G.componentOf(St),r=a&&a.componentOf("txt");if(r){var i="",l=(r.state.klass||"").trim();l=e(l,!0);var o=window.prompt("Modify klass",l);if("string"==typeof o&&(o=e(o.trim(),!1),i&&(o=i+" "+o),(o=o.trim())!==r.state.klass)){var n=a.elementOf("txt");if(!n||!n.props["marked."])return;n=j.cloneElement(n,{"html.":r.state["html."]||"",klass:o}),a.setChild("-txt",function(t){a.setChild(n)})}}else if(a){var s=window.prompt("Input text","text");"string"==typeof s&&(a.duals["html."]=s.trim(),p())}}}),n(o(".clone",bt),"mousedown",function(t){if(!(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)&&G&&St){var e=G.componentOf(St),a=G.elementOf(St);if(e&&a){var r="auto"+(xt+=1),i=t.clientX,l=t.clientY;_(e,a,r,function(){var t=G.componentOf(r);t&&(se=t,fe=i+4,de=l+4,ce=t.state.left,he=t.state.top)})}}}),n(o(".link",bt),"mousedown",function(t){if(G&&St&&!(t.ctrlKey||t.altKey||t.metaKey)){var e=G.componentOf(St);if(e){var a=e.getHtmlNode(),i=e.state["svg.cfg"];if(a&&Array.isArray(i)){var l;if(xe=!1,"block"==wt.style.display&&Array.isArray(l=i[1])){var o=r(a),n=e.state.stroke||3,s=Math.floor(2.5*n+.5);s*=U,xe=!0,Me=o.left+s+l[l.length-2]*wt.rateX,Ce=o.top+s+l[l.length-1]*wt.rateY}ke=e,Ae=t.shiftKey,Oe=t.clientX,Ne=t.clientY}}}}),n(o(".fork",bt),"mousedown",function(t){if(G&&St&&!(t.ctrlKey||t.altKey||t.metaKey)){var e=G.componentOf(St),a=G.elementOf(St);if(e&&a){var r="auto"+(xt+=1),i=t.clientX,l=t.clientY,o=t.shiftKey;_(e,a,r,function(){var t=G.componentOf(r);t&&(Xe=o,Te=e,Ie=t,Se=i+4,Ee=l+4,Ye=t.state.left,He=t.state.top)})}}}),n(o(".rotate",bt),"mousedown",function(t){if(!(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)&&G&&St){var e=G.componentOf(St);if(e){var a=e.getHtmlNode();if(a){var i=r(a);ue=e,pe=e.state.rotate||0,ge=M(i.left+i.width/2,i.top+i.height/2,t.clientX,t.clientY)}}}}),n(mt,"dragover",function(t){G&&L(t.dataTransfer,"application/json")&&t.preventDefault()}),n(mt,"drop",function(t){function e(){var t=u.scene,e=!1,a=100,r=60;if(Array.isArray(t)){var i=t[0];if(Array.isArray(i)&&"rewgt.DrawPaper"===i[0]){var l=i[1]||{};a=l.width||a,r=l.height||r,e=!0,t=t[1]}}else t=u.widget;if(Array.isArray(t)){var o=D.loadElement(t);if(o){if(!o.props["svg.cfg"]){var n=(o.props.className||"").split(/ +/);if(n.indexOf("rewgt-panel")<0&&n.indexOf("rewgt-unit")<0||o.props["drawPaper."]||o.props["isScenePage."])return void alert("Error: invalid widget type!");var s=t.slice(0);"string"==typeof s[0]&&(s=[s]);var f=s[0],p=f[1];p||(f[1]=p={}),delete p["data-group.optid"];var g=p.width,y=p.height;p.width=.9999,p.height=.9999,a=isNaN(g)||g<12?a:g,r=isNaN(y)||y<12?r:y,e=!0;var v=h(s,0,1);o=D.loadElement(["rewgt.SvgPanel",{klass:"nowrap-default-wrap_reverse items_center-end-stretch-default","html.":v,left:0,top:0,width:100,height:60,style:{strokeColor:"rgba(0,0,0,0)",fillColor:"rgba(0,0,0,0)"},"svg.cfg":[0,[],"lib/res/rect2.svg.json"]}])}var m={left:d,top:c,key:"auto"+(xt+=1)};if(e)m.width=a,m.height=r;else{var g=o.props.width,y=o.props.height;m.width=isNaN(g)||g<12?a:g,m.height=isNaN(y)||y<12?r:y}o=j.cloneElement(o,m),G.setChild(o)}}}if(G&&L(t.dataTransfer,"application/json")){t.stopPropagation(),t.preventDefault();var a=null,r=t.dataTransfer.getData("application/json")||"{}";try{a=JSON.parse(r)}catch(t){console.log(t)}if(a){if("image"==a.dragType){var i=G.componentOf(St),l=i&&i.componentOf("txt"),o=i&&i.elementOf("txt");if(!l||!o||!o.props["marked."])return;if(!(p=a.dragUrl))return;0==p.indexOf(F)&&p.length>F.length&&(p=p.slice(F.length));var n=Object.assign({},l.props.style,{backgroundImage:"url("+p+")"});return o=j.cloneElement(o,{style:n}),void i.setChild("-txt",function(t){i.setChild(o)})}if("template"==a.dragType){var s=G.state.offsetX||0,f=G.state.offsetY||0,d=t.clientX-s,c=t.clientY-At-f,u=a.option;if("object"!=typeof u){if(void 0===u&&a.dragUrl){var p=a.dragUrl+".json";$(p,function(t,a){if(t)alert("error: read JSON failed ("+p+").");else{try{u=JSON.parse(a)}catch(t){alert("error: parse JSON failed ("+p+").")}u&&u.name&&e()}})}}else u.name&&e()}}}}),n(mt,"mousedown",function(t){function e(t,e){var i=null,l=-999;return D.eachComponent(G,function(o){var n=o.getHtmlNode();if(n){var s=r(n);if(t>=s.left&&t<s.left+s.width&&e>=s.top&&e<s.top+s.height){if(o.state["data-from"])return void(a=!0);var f=parseInt(n.style.zIndex||"0");(!i||f>=l)&&(l=f,i=o)}}}),i}var a=!1;if(G&&!(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)){t.stopPropagation();var i=!1;St||((c=e(t.clientX,t.clientY))&&(w(c,0,!1),St=c.duals.keyid+""),i=!0);var l,o=null;if(St&&(l=G.componentOf(St))){var n=l.getHtmlNode();if(l.state["data-from"])a=!0;else if(n){var s=r(n),f=t.clientX,d=t.clientY;f>=s.left&&f<s.left+s.width&&d>=s.top&&d<s.top+s.height&&(o=l)}}if(St&&!o&&!i){var c=e(t.clientX,t.clientY);c&&(w(c,0,!1),St=c.duals.keyid+"",o=c)}o&&(Ft=o,Bt=!1,Ut=[],Vt=[],Gt=f,Zt=d,Qt=o.state.left,te=o.state.top,setTimeout(function(){bt.style.display="none",wt.style.display="none",kt.style.display="none"},0)),o||St||a||($t=mt,qt=!1,Jt=zt=t.clientX,Wt=jt=t.clientY,Dt=G.state.offsetX,Rt=G.state.offsetY,G.duals.style={cursor:"pointer"})}}),n(mt,"mousemove",function(t){function e(t,e,a){"none"!=t.style.display&&(t.style.left=parseFloat(t.style.left)+e+"px",t.style.top=parseFloat(t.style.top)+a+"px")}if(G){var a=t.clientX,i=t.clientY;if(Ft){var l=a-Gt,o=i-Zt;if(!Bt&&(Math.abs(l)>5||Math.abs(o)>5)){Bt=!0;var n=Ft.duals.keyid+"";D.eachComponent(G,function(t){if(t!==Ft){var e,a=t.state["svg.cfg"];if(Array.isArray(a)&&Array.isArray(e=a[1])){var r=e[1];if(Array.isArray(r))for(var i,l=0;i=r[l];l++)i[2]===n&&Ut.push(t)}}});var s=Ft.state["svg.cfg"];if(Array.isArray(s)&&Array.isArray(W=s[1])){var f=W[1];Array.isArray(f)&&f.forEach(function(t){var e=t[0],a=t[2];if(a)(r=G.componentOf(a))&&Vt.push([r]);else{var r=G.componentOf(e);r&&Vt.push([r,r.state.left,r.state.top])}})}}Bt&&T(Ft,Ut,Vt,Qt+l,te+o,l,o)}else if($t){var l=a-zt,o=i-jt;if(qt||(Math.abs(l)>5||Math.abs(o)>5)&&(qt=!0),qt){var d=Dt+l,c=Rt+o;G.duals.offsetX=d,G.duals.offsetY=c,G.duals.style={backgroundPosition:d%20+"px "+c%20+"px"},at.innerHTML="("+d+","+c+")";var h=a-Jt,u=i-Wt;Jt=a,Wt=i,e(wt,h,u),e(kt,h,u),e(bt,h,u)}}else if(se){var l=a-fe,o=i-de;se.duals.left=ce+l,se.duals.top=he+o}else if(Te){var l=a-Se,o=i-Ee;Ie.duals.left=Ye+l,Ie.duals.top=He+o}else if(ue)(Q=ue.getHtmlNode())&&(Y=M((nt=r(Q)).left+nt.width/2,nt.top+nt.height/2,a,i),(H=(pe+Y-ge)%360)<0&&(H+=360),ue.duals.rotate=H,kt.style[B]=0==H?"":"rotate("+H+"deg)");else if(ye){var l=a-me,o=i-we,p=be.left-(G.state.offsetX||0),g=be.top-At-(G.state.offsetY||0);if("top-left"==ve){var y=be.width-l,v=be.height-o;y>=12&&v>=12&&(ye.duals.left=p+l,ye.duals.top=g+o,ye.duals.width=y,ye.duals.height=v,C(be.left+l,be.top+o,y,v))}else if("top"==ve)(v=be.height-o)>=12&&(ye.duals.top=g+o,ye.duals.height=v,C(be.left,be.top+o,be.width,v));else if("top-right"==ve){var y=be.width+l,v=be.height-o;y>=12&&v>=12&&(ye.duals.top=g+o,ye.duals.width=y,ye.duals.height=v,C(be.left,be.top+o,y,v))}else if("right"==ve)(y=be.width+l)>=12&&(ye.duals.width=y,C(be.left,be.top,y,be.height));else if("bottom-right"==ve){var y=be.width+l,v=be.height+o;y>=12&&v>=12&&(ye.duals.width=y,ye.duals.height=v,C(be.left,be.top,y,v))}else if("bottom"==ve)(v=be.height+o)>=12&&(ye.duals.height=v,C(be.left,be.top,be.width,v));else if("bottom-left"==ve){var y=be.width-l,v=be.height+o;y>=12&&v>=12&&(ye.duals.left=p+l,ye.duals.width=y,ye.duals.height=v,C(be.left+l,be.top,y,v))}else"left"==ve&&(y=be.width-l)>=12&&(ye.duals.left=p+l,ye.duals.width=y,C(be.left+l,be.top,y,be.height))}else if(ke){if(!(Q=ke.getHtmlNode()))return;var m,w,b="";if(xe)m=Me,w=Ce;else{if(a>=(nt=r(Q)).left&&a<=nt.left+nt.width&&i>=nt.top&&i<=nt.top+nt.height)return;if(Math.abs(a-Oe)<20&&Math.abs(i-Ne)<20)return;var k,A,x=ke.state["data-zero"],O=nt.left+nt.width/2,X=nt.top+nt.height/2,S=nt.width/2,E=nt.height/2;if(x)b="center,0",k=O,A=X,m=Math.floor(k+.5),w=Math.floor(A+.5);else{var Y=M(O,X,nt.left+nt.width,nt.top+nt.height),H=M(O,X,nt.left,nt.top+nt.height),K=M(O,X,nt.left,nt.top),P=M(O,X,nt.left+nt.width,nt.top),_=M(O,X,a,i);_>P&&_<=360||_>=0&&_<=Y?(b="right",k=O+S,A=i>nt.top+2&&i<nt.top+nt.height-2?i:X+S*(i-X)/(a-O)):_>Y&&_<=H?(b="bottom",A=X+E,k=a>nt.left+2&&a<nt.left+nt.width-2?a:O+E*(a-O)/(i-X)):_>H&&_<=K?(b="left",k=nt.left,A=i>nt.top+2&&i<nt.top+nt.height-2?t.clientY:X+S*(i-X)/(O-a)):(b="top",A=nt.top,k=a>nt.left+2&&a<nt.left+nt.width-2?a:O+E*(a-O)/(X-i)),m=Math.floor(k+.5),w=Math.floor(A+.5),b+="right"==b||"left"==b?","+(w-At):","+m}}var L=Math.floor(2.5*Kt+.5);L*=U;var $=Math.min(a,m),q=Math.min(i,w),d=$-L,c=q-L-At,z=L+L+1,j=Math.max(Math.abs(a-m)+L+L,z),J=Math.max(Math.abs(i-w)+L+L,z),W=[Ht,0,0,Pt,m-$,w-q,a-$,i-q],R=[Ae?-2:-1,W,V];if(ee&&(ae===ke?(ee.duals.left=d-(G.state.offsetX||0),ee.duals.top=c-(G.state.offsetY||0),ee.duals.width=j,ee.duals.height=J,ee.duals["data-align"]=b,ee.duals["svg.cfg"]=R):(N(ee),ee=null,ae=null)),!ee){var F="auto"+(xt+=1),Z=D.loadElement(["rewgt.SvgPanel",{key:F,klass:"nowrap-default-wrap_reverse items_center-end-stretch-default",left:d-(G.state.offsetX||0),top:c-(G.state.offsetY||0),width:j,height:J,style:{strokeColor:Et,fillColor:Yt,zIndex:"-1"},stroke:Kt,"svg.cfg":R,"data-align":b,"data-from":""}]);G.setChild(Z,function(t){var e=G.componentOf(F);e&&(ee=e,ae=ke)})}}else if(Ke){var Q=Ke.getHtmlNode();if(Q&&Pe&&"block"==wt.style.display){var tt=Ke.state["svg.cfg"];if(Array.isArray(tt)&&Array.isArray(subCfg=tt[1])){var l=a-$e,o=i-qe,et=parseInt(Pe.getAttribute("_pos")||"1"),rt=et+et+5;if(rt<subCfg.length){(tt=tt.slice(0))[1]=subCfg=subCfg.slice(0);var it=Ke.state.stroke,lt=wt.rateX||1,ot=wt.rateY||1,nt=r(Q);subCfg[rt-1]=_e+l/lt,subCfg[rt]=Le+o/ot;var st=I(nt,subCfg,it,lt,ot);Ke.duals.left=st[0],Ke.duals.top=st[1],Ke.duals.width=st[2],Ke.duals.height=st[3],Ke.duals["svg.cfg"]=tt,Pe.style.left=ze+l+"px",Pe.style.top=je+o+"px"}}}}}}),n(document.body,"mouseup",function(t){function e(t,e){var a=t-e,r=4*Math.floor(a/4),i=a-r;return i>2?r+=4:i<-2&&(r-=4),r+e}function a(t){var e=4*Math.floor(t/4);return t-e>2?e+4:e}if(G){t.stopPropagation();var i=!0;if(Ft){if(Bt){i=!1;var l=G.state.offsetX||0,o=G.state.offsetY||0,n=e(t.clientX,l)-Gt,s=e(t.clientY,o)-Zt;T(Ft,Ut,Vt,Qt+n,te+s,n,s),w(Ft,100,!1)}Bt=!1,Ut=[],Vt=[]}else if($t)qt&&(i=!1),G.duals.style={cursor:""},qt=!1;else if(se)i=!1,setTimeout(function(t){t.duals.left=e(t.state.left,0),t.duals.top=e(t.state.top,0)},0,se);else if(Te)i=!1,setTimeout(function(t,a){a.duals.left=e(a.state.left,0),a.duals.top=e(a.state.top,0),a.reRender(function(){O(t,a,Xe)})},0,Te,Ie),Ie=null;else if(ue){if(i=!1,v=ue.getHtmlNode()){var d=ue.state.rotate||0;if(0!=d){var c=15*Math.floor(d/15);d!=c&&(d=d-c<7.5?c:(c+15)%360)}ue.duals.rotate=d,kt.style[B]=0==d?"":"rotate("+d+"deg)"}w(ue,100,!0)}else if(ye){if(i=!1,v=ye.getHtmlNode(),b=v&&r(v)){var h=b.left,u=b.top-At,g=b.width,y=b.height;"top-left"==ve?(ye.duals.left=e(h-(G.state.offsetX||0),0),ye.duals.top=e(u-(G.state.offsetY||0),0),ye.duals.width=a(g),ye.duals.height=a(y)):"top"==ve?(ye.duals.top=e(u-(G.state.offsetY||0),0),ye.duals.height=a(y)):"top-right"==ve?(ye.duals.top=e(u-(G.state.offsetY||0),0),ye.duals.width=a(g),ye.duals.height=a(y)):"right"==ve?ye.duals.width=a(g):"bottom-right"==ve?(ye.duals.width=a(g),ye.duals.height=a(y)):"bottom"==ve?ye.duals.height=a(y):"bottom-left"==ve?(ye.duals.left=e(h-(G.state.offsetX||0),0),ye.duals.width=a(g),ye.duals.height=a(y)):"left"==ve&&(ye.duals.left=e(h-(G.state.offsetX||0),0),ye.duals.width=a(g))}w(ye,100,!0)}else if(ke){if(i=!1,xe){var v=ke.getHtmlNode(),n=t.clientX-Me,s=t.clientY-Ce;if(v&&(Math.abs(n)>=4||Math.abs(s)>=4)){var b=r(v);setTimeout(function(t,e,a){var r,i=t.state["svg.cfg"],l=t.state.stroke;if(Array.isArray(i)&&Array.isArray(r=i[1])){i=i.slice(0),r=r.slice(0),i[1]=r;var o=r[r.length-2],f=r[r.length-1];r.push(o+n/e,f+s/a);var d=I(b,r,l,e,a);t.duals.left=d[0],t.duals.top=d[1],t.duals.width=d[2],t.duals.height=d[3],t.duals["svg.cfg"]=i,w(t,100,!1)}},100,ke,wt.rateX,wt.rateY)}}else if(ee){var k=t.clientX,A=t.clientY,x=null,M=-999;D.eachComponent(G,function(t){if(t!==ke){var e=t.state["data-align"],a=t.getHtmlNode();if(!e&&a){var i=r(a),l=i.width/10,o=i.height/10;if(k>=i.left+l&&k<i.left+i.width-l&&A>=i.top+o&&A<i.top+i.height-o){var n=parseInt(a.style.zIndex||"0");n>=M&&(x=t,M=n)}}}}),x?O(ke,x,Ae):(setTimeout(function(t,e){e.duals["data-from"]=t.duals.keyid+"";var a=t.state["svg.cfg"];if(Array.isArray(a)&&a.length>=2){var r=e.duals.keyid+"",i=a[1],l=i[1];Array.isArray(l)||(i[1]=l=[]),l.push([r,Ae?-2:-1])}},100,ke,ee),ee=null,ae=null)}ee&&(N(ee),ee=null,ae=null)}else Ke&&(i=!1,w(Ke,100,!0),Pe=null);var C=null;if(i){var X=t.target;if(X===vt);else{for(var S=document.body,E=!1,Y=null;X&&X!==S;){if(X===mt){E=!0;break}X.classList.contains("rewgt-paperview")&&(C=Y),Y=X,X=X.parentNode}E||(i=!1,C=null)}}i&&(f(),C&&(St=D.keyOfNode(C))?m(St):p()),$t=null,Ft=null,se=null,Te=null,ue=null,ye=null,ke=null,Ke=null}}),n(document.body,"click",function(t){f(),t.stopPropagation()}),n(document.body,"keydown",function(t){if(G&&!(t.ctrlKey||t.altKey||t.metaKey)){var e=t.shiftKey,a=e&&38==t.keyCode,i=e&&40==t.keyCode;if(a||i){var l=[];if(D.eachComponent(G,function(t){var e=t.getHtmlNode();if(e){var a=r(e);l.push([a.top,a.left,t,t.duals.keyid+""])}}),l.length){l.sort(function(t,e){var a=t[0],r=e[0];return a==r?t[1]>e[1]?1:-1:a>r?1:-1});var o=0;if(St){var n=l.findIndex(function(t){return t[3]===St});n>=0&&(a?o=n>0?n-1:l.length-1:(o=n+1)==l.length&&(o=0))}var s=l[o];p(),setTimeout(function(){St=s[3],w(s[2],100,!1)},100)}}}});var Ct=null,Ot={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",feldspar:"#d19275",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslateblue:"#8470ff",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",violetred:"#d02090",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Nt="",Tt=/([A-Z])/g,It=null,Xt=null,St="",Et="rgb(119,119,119)",Yt="rgb(119,119,119)",Ht="",Kt=3,Pt=2,_t=0,Lt=0,$t=null,qt=!1,zt=0,jt=0,Jt=0,Wt=0,Dt=0,Rt=0,Ft=null,Bt=!1,Ut=[],Vt=[],Gt=0,Zt=0,Qt=0,te=0,ee=null,ae=null,re=!0,ie=["m0,50l100,0","m100,50l-100,40l30,-40l-30,-40z","m20,50c0,-16.57458 13.42542,-30 30,-30c16.57458,0 30,13.42542 30,30c0,16.57458 -13.42542,30 -30,30c-16.57458,0 -30,-13.42542 -30,-30z","m20,20l0,60l60,0l0,-60z","m20,80l60,-60m0,60l-60,-60","m50,0l0,100"],le=["m0,50l100,0","m0,50l100,40l-30,-40l30,-40z","m20,50c0,-16.57458 13.42542,-30 30,-30c16.57458,0 30,13.42542 30,30c0,16.57458 -13.42542,30 -30,30c-16.57458,0 -30,-13.42542 -30,-30z","m20,20l0,60l60,0l0,-60z","m20,80l60,-60m0,60l-60,-60","m50,0l0,100"],oe=["","1,1","2,2","5,5","5,10","10,5","5,1","15,10,5,10,15"],ne=["align_center-right-default","right-default-align_center","default-align_center-right","left-align_center-right","align_center-right-left","right-left-align_center"],se=null,fe=0,de=0,ce=0,he=0,ue=null,pe=0,ge=0,ye=null,ve="",me=0,we=0,be=null,ke=null,Ae=!1,xe=!1,Me=0,Ce=0,Oe=0,Ne=0,Te=null,Ie=null,Xe=!1,Se=0,Ee=0,Ye=0,He=0,Ke=null,Pe=null,_e=0,Le=0,$e=0,qe=0,ze=0,je=0,Je=0,We="",De=null;if(window.parent&&window.parent.window!==window){window.addEventListener("message",function(t){try{"object"==typeof t&&t.data?(t=t.data,t=JSON.parse(t.slice(14))):t=null}catch(e){t=null,console.log(e)}"object"==typeof t&&("init"==t.method?z(t.param[0],t.param[1],t.param[2]):t.method)},!1);var Re="[PROJECT_NAME]"+JSON.stringify({method:"onDialogLoad",param:[]});window.parent.window.postMessage(Re,"*")}});